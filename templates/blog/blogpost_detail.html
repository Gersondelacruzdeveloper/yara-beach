{% extends 'base2.html' %}
{% load static %}
{% block content %}
  <article class="blog-post">
    <p>By {{ post.author }} on {{ post.created_at|date:"F d, Y" }}</p>
    <p><span class="rating">‚≠ê {{ post.rating }}/5 Reviews</span>

        <div class="gallery">
            {% if post.featured_image %}
            <img src="{{ post.featured_image.url }}" alt="{{ post.title }}" style="max-width: 100%;">
            {% endif %}
    
            {% for image in post.images.all %}
                <img loading="lazy" src="{{ image.image_url }}" alt="Blog post image for {{ blog_post.title }}">
             {% endfor %}
        </div>

        <div class="fullscreen" id="fullscreen">
            <span class="close-btn" onclick="closeFullscreen()">&#10005;</span>
            <span class="counter" id="counter"></span>
            <img id="fullscreen-img" src="" alt="Fullscreen Image">
            <span class="arrow arrow-left" onclick="prevImage()">&#10094;</span>
            <span class="arrow arrow-right" onclick="nextImage()">&#10095;</span>
          </div>
          
        
        
        {% if post.video_id %}
        <div style="width:100%">
          <iframe width="100%" height="300px" src="https://www.youtube.com/embed/{{post.video_id}}"
            title="YouTube video player" frameborder="0"
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
            allowfullscreen></iframe>
        </div>
        {% endif%}

    <div class="blog-content">
      {{ post.content|safe }}
    </div>

    <!-- <p><strong>Estimated read time:</strong> {{ post.read_time }} minutes</p> -->
    <p><strong><i class="fa-solid fa-eye"></i>:</strong> {{ post.view_count }}</p>

    <!-- Social media meta tags for SEO -->
    <meta name="description" content="{{ post.get_meta_description }}">
    <meta property="og:title" content="{{ post.get_meta_title }}">
    <meta property="og:description" content="{{ post.og_description }}">
    {% if post.og_image %}
      <meta property="og:image" content="{{ post.og_image.url }}">
    {% endif %}

<!-- Edit and Delete buttons for the author -->
  {% if user == post.author %}
  <a href="{% url 'blog:blogpost_update' post.slug %}">Edit Post</a>
  <a href="{% url 'blog:blogpost_delete' post.slug %}" onclick="return confirm('Are you sure you want to delete this post?');">Delete Post</a>
{% endif %}
  </article>
  <script src="{% static 'js/blogPostDetail.js' %}"></script>
{% endblock %}
